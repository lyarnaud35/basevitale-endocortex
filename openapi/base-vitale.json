{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getData","parameters":[],"responses":{"200":{"description":""}}}},"/api/health":{"get":{"operationId":"HealthController_health","parameters":[],"responses":{"200":{"description":""}}}},"/api/health/db":{"get":{"operationId":"HealthController_healthDb","parameters":[],"responses":{"200":{"description":""}}}},"/api/health/all":{"get":{"operationId":"HealthController_healthAll","parameters":[],"responses":{"200":{"description":""}}}},"/api/metrics":{"get":{"operationId":"MetricsController_getMetrics","parameters":[],"responses":{"200":{"description":""}}}},"/api/metrics/health":{"get":{"operationId":"MetricsController_getHealthMetrics","parameters":[],"responses":{"200":{"description":""}}}},"/api/ghost-scribe/ping":{"get":{"operationId":"ScribeGhostController_ping","parameters":[],"responses":{"200":{"description":""}},"tags":["Scribe Ghost"]}},"/api/ghost-scribe/stream/{sessionId}":{"get":{"operationId":"ScribeGhostController_streamMachineState","summary":"Streamer l'état de la ScribeMachine via SSE (GHOST PROTOCOL)","description":"Ouvre une connexion SSE et envoie les mises à jour d'état en temps réel. Le client doit envoyer des événements via POST /api/scribe/events/:sessionId","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Stream SSE actif"},"404":{"description":"Session introuvable"}},"tags":["Scribe Ghost"]}},"/api/ghost-scribe/events/{sessionId}":{"post":{"operationId":"ScribeGhostController_sendEvent","summary":"Envoyer un événement à la ScribeMachine (GHOST PROTOCOL)","description":"Envoie une intention (START, STOP, UPDATE_TEXT, CONFIRM, RESET) et reçoit le nouvel état. Les événements invalides sont ignorés par la machine.","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Nouvel état de la machine (value, context, updatedAt)"},"400":{"description":"Événement invalide"},"404":{"description":"Session introuvable"}},"tags":["Scribe Ghost"]}},"/api/ghost-scribe/state/{sessionId}":{"get":{"operationId":"ScribeGhostController_getState","summary":"Récupérer l'état actuel de la ScribeMachine","description":"Retourne l'état complet (value, context, updatedAt)","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"État actuel de la machine"},"404":{"description":"Session introuvable"}},"tags":["Scribe Ghost"]}},"/api/ghost-scribe/reset/{sessionId}":{"post":{"operationId":"ScribeGhostController_resetMachine","summary":"Réinitialiser la ScribeMachine","description":"Remet la machine à l'état IDLE pour un nouveau cycle","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Machine réinitialisée"},"404":{"description":"Session introuvable"}},"tags":["Scribe Ghost"]}},"/api/oracle/{patientId}/start":{"post":{"operationId":"OracleController_start","summary":"Démarrer l'Oracle pour un patient","description":"Crée ou réinitialise la machine, envoie INITIALIZE + START_FETCH, puis exécute Mock + xAI en arrière-plan. Connectez-vous au stream GET /oracle/:patientId/stream pour recevoir les états en temps réel.","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Démarrage lancé"}},"tags":["Oracle"]}},"/api/oracle/{patientId}/stream":{"get":{"operationId":"OracleController_streamState","summary":"Stream SSE de l'état de l'Oracle","description":"Ouvre une connexion SSE et reçoit les mises à jour (value, context, updatedAt) en temps réel.","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Stream SSE actif"},"404":{"description":"Patient non trouvé"}},"tags":["Oracle"]}},"/api/oracle/{patientId}/state":{"get":{"operationId":"OracleController_getState","summary":"État actuel de l'Oracle","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"État (value, context, updatedAt)"},"404":{"description":"Patient non trouvé"}},"tags":["Oracle"]}},"/api/ghost-security/ping":{"get":{"operationId":"SecurityGhostController_ping","summary":"Ping du module Security","parameters":[],"responses":{"200":{"description":"Module actif"}},"tags":["Security-C-Verification-prescription"]}},"/api/ghost-security/stream":{"get":{"operationId":"SecurityGhostController_streamState","summary":"Flux SSE de l’état de la SecurityMachine","parameters":[],"responses":{"200":{"description":"Stream Server-Sent Events (SecurityMachineState)"}},"tags":["Security-C-Verification-prescription"]}},"/api/ghost-security/send":{"post":{"operationId":"SecurityGhostController_send","summary":"Vérifier une prescription ou envoyer un événement (check-prescription : type CHECK_DRUG)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","payload"],"properties":{"type":{"type":"string","enum":["CHECK_DRUG","RESET","REQUEST_OVERRIDE"]},"payload":{"type":"object"}},"example":{"type":"CHECK_DRUG","payload":{"drug":"Amoxicilline"}}}}}},"responses":{"200":{"description":"État de la machine (SAFE | LOCKED | OVERRIDE_APPROVED)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityResponseDto"}}}},"400":{"description":"Payload invalide (validation Zod)"}},"tags":["Security-C-Verification-prescription"]}},"/api/ghost-security/state":{"get":{"operationId":"SecurityGhostController_getState","summary":"Obtenir l’état courant de la SecurityMachine","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityResponseDto"}}}}},"tags":["Security-C-Verification-prescription"]}},"/api/security-guard/{patientId}/watch":{"post":{"operationId":"SecurityGuardController_startWatch","summary":"Démarrer l’observation Oracle pour ce patient","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Watch démarré"}},"tags":["Security Guard"]}},"/api/security-guard/{patientId}/state":{"get":{"operationId":"SecurityGuardController_getState","summary":"État de la SecurityGuard (IDLE | DEFCON_3)","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"value, context, updatedAt"}},"tags":["Security Guard"]}},"/api/coding":{"get":{"operationId":"CodingController_ping","summary":"Ping du module Coding","parameters":[],"responses":{"200":{"description":"Module actif"}},"tags":["Coding-CIM-10"]}},"/api/coding/stream":{"get":{"operationId":"CodingController_streamState","summary":"Flux SSE de l’état de la machine de codage","parameters":[],"responses":{"200":{"description":"Stream Server-Sent Events (CodingMachineState)"}},"tags":["Coding-CIM-10"]}},"/api/coding/analyze":{"post":{"operationId":"CodingController_analyze","summary":"Analyser un texte et obtenir des suggestions CIM-10 (suggest)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeTextBodyDto"},"examples":{"fracture":{"summary":"Fracture (→ S82, SUGGESTING)","value":{"text":"Le patient présente une fracture du tibia droit."}},"ventre":{"summary":"Douleur ventre (→ R10, SILENT)","value":{"text":"Mal au ventre depuis ce matin."}}}}}},"responses":{"200":{"description":"État de la machine après analyse (IDLE | ANALYZING | SUGGESTING | SILENT)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodingResponseDto"}}}},"400":{"description":"Texte manquant ou invalide"}},"tags":["Coding-CIM-10"]}},"/api/coding/send":{"post":{"operationId":"CodingController_send","summary":"Envoyer un événement à la machine (ANALYZE_TEXT, ACCEPT_CODE, RESET)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","payload"],"properties":{"type":{"type":"string","enum":["ANALYZE_TEXT","ACCEPT_CODE","RESET"]},"payload":{"type":"object"}},"example":{"type":"RESET","payload":{}},"examples":{"analyze":{"summary":"Analyser un texte","value":{"type":"ANALYZE_TEXT","payload":{"text":"Le patient présente une fracture du tibia."}}},"acceptCode":{"summary":"Accepter un code suggéré","value":{"type":"ACCEPT_CODE","payload":{"code":"S82","label":"Fracture de la jambe"}}},"reset":{"summary":"Réinitialiser la machine","value":{"type":"RESET","payload":{}}}}}}}},"responses":{"200":{"description":"État de la machine après traitement","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodingResponseDto"}}}},"400":{"description":"Payload invalide (validation Zod)"}},"tags":["Coding-CIM-10"]}},"/api/coding/state":{"get":{"operationId":"CodingController_getState","summary":"Obtenir l’état courant de la machine de codage","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodingResponseDto"}}}}},"tags":["Coding-CIM-10"]}},"/api/coding-assistant/{patientId}/state":{"get":{"operationId":"CodingAssistantController_getState","summary":"État de la CodingAssistantMachine (IDLE | ANALYZING | SUGGESTING | SILENT)","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"value, context, updatedAt"}},"tags":["Coding Assistant"]}},"/api/patient/{id}/dashboard-state":{"get":{"operationId":"PatientDashboardController_getDashboardState","summary":"État agrégé du dashboard patient (Oracle, Security, Coding)","description":"Source unique de vérité pour le frontend. Oracle = contexte patient (timeline, alertes). Security = vigilance DEFCON_3. Coding = suggestions CIM-10 (status SUGGESTING/SILENT, suggestions avec confidence).","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"État agrégé des 3 piliers (oracle, security, coding)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientDashboardStateDto"}}}}},"tags":["Patient"]}},"/api/ghost/stream/{machineId}":{"get":{"operationId":"GhostController_streamMachineState","summary":"Streamer l'état d'une machine via SSE (GHOST PROTOCOL)","description":"Ouvre une connexion SSE et envoie les mises à jour d'état en temps réel. Le client doit envoyer des événements via POST /api/ghost/machine/:machineId/event","parameters":[{"name":"machineId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Stream SSE actif"},"404":{"description":"Machine introuvable"}},"tags":["Ghost"]}},"/api/ghost/machine/{machineId}/event":{"post":{"operationId":"GhostController_sendMachineEvent","summary":"Envoyer un événement à une machine (GHOST PROTOCOL)","description":"Envoie une intention (événement) à la machine et reçoit le nouvel état. Les événements invalides sont ignorés par la machine.","parameters":[{"name":"machineId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Nouvel état de la machine (value, context, updatedAt)"},"400":{"description":"Événement invalide"},"404":{"description":"Machine introuvable"}},"tags":["Ghost"]}},"/api/ghost/machine/{machineId}/state":{"get":{"operationId":"GhostController_getMachineState","summary":"Récupérer l'état actuel d'une machine","description":"Retourne l'état complet (value, context, updatedAt)","parameters":[{"name":"machineId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"État actuel de la machine"},"404":{"description":"Machine introuvable"}},"tags":["Ghost"]}},"/api/ghost/machine/{machineId}/reset":{"post":{"operationId":"GhostController_resetMachine","summary":"Réinitialiser une machine","description":"Remet la machine à son état initial","parameters":[{"name":"machineId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Machine réinitialisée"},"404":{"description":"Machine introuvable"}},"tags":["Ghost"]}},"/api/scribe/analyze":{"post":{"operationId":"ScribeController_analyze","summary":"Analyser un texte de consultation","parameters":[],"responses":{"200":{"description":"Consultation structurée (symptoms, diagnosis, medications)"},"400":{"description":"Texte vide ou invalide"}},"tags":["Scribe"]}},"/api/scribe/analyze-consultation":{"post":{"operationId":"ScribeController_analyzeConsultation","parameters":[],"responses":{"200":{"description":""}},"tags":["Scribe"]}},"/api/scribe/process-dictation":{"post":{"operationId":"ScribeController_processDictation","summary":"Analyser une dictée et créer un brouillon","description":"Analyse (MOCK/CLOUD/LOCAL), crée un ConsultationDraft. Réponse: success, draft, consultation (symptoms, diagnosis, medications, billingCodes, prescription).","parameters":[],"responses":{"201":{"description":"Draft créé ; consultation structurée (billingCodes, prescription inclus)."},"400":{"description":"Texte ou patientId invalide"}},"tags":["Scribe"]}},"/api/scribe/drafts":{"get":{"operationId":"ScribeController_listDrafts","summary":"Lister les brouillons (pagination, filtre patientId)","parameters":[{"name":"patientId","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}},{"name":"offset","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"items, total, limit, offset"}},"tags":["Scribe"]}},"/api/scribe/draft/{id}":{"get":{"operationId":"ScribeController_getDraft","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Scribe"]},"patch":{"operationId":"ScribeController_updateDraft","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Scribe"]}},"/api/scribe/draft/{id}/validate":{"post":{"operationId":"ScribeController_validateDraft","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Scribe"]}},"/api/scribe/validate/{draftId}":{"post":{"operationId":"ScribeController_validateFinal","summary":"Valider un draft (Firewall médical)","description":"Vérifie les allergies du patient (Neo4j), puis écrit en Postgres + Neo4j. Si le Gardien Causal détecte une ordonnance contre-indiquée → 400 (pas un bug, feature vitale).","parameters":[{"name":"draftId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Succès : Données écrites dans Neo4j et Postgres.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateFinalSuccessDto"}}}},"400":{"description":"SÉCURITÉ : Interdiction critique (Allergie/Interaction). Le widget gère l'affichage, mais l'API bloque l'écriture.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuardianBlockErrorDto"}}}},"404":{"description":"Draft introuvable."},"500":{"description":"Erreur interne (ex. Neo4j indisponible, projection échouée)."}},"tags":["Scribe"]}},"/api/scribe/patient/{patientId}/profile":{"get":{"operationId":"ScribeController_getPatientProfile","summary":"Profil médical patient (Total Recall)","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"consultations, conditions, medications, symptomsRecurrent"},"404":{"description":"Patient introuvable"}},"tags":["Scribe"]}},"/api/scribe/patient/{patientId}/intelligence":{"get":{"operationId":"ScribeController_getPatientIntelligence","summary":"Get Human-Ready Intelligence for Host App","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"summary, timeline, activeAlerts, quickActions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntelligenceResponseDto"}}}},"404":{"description":"Patient introuvable"}},"tags":["Scribe"]}},"/api/scribe/health":{"get":{"operationId":"ScribeController_getHealth","summary":"Health check Scribe (public)","parameters":[],"responses":{"200":{"description":"aiCortex, neo4j, postgres, timestamp"}},"tags":["Scribe"]}},"/api/scribe/stats":{"get":{"operationId":"ScribeController_getStats","parameters":[],"responses":{"200":{"description":""}},"tags":["Scribe"]}},"/api/scribe/machine/{sessionId}/event":{"post":{"operationId":"ScribeController_sendMachineEvent","summary":"Envoyer un événement à la ScribeMachine (GHOST PROTOCOL)","description":"Envoie une intention (START_RECORD, STOP_RECORD, UPDATE_TEXT, CONFIRM) et reçoit le nouvel état.","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Nouvel état de la machine (value, context, updatedAt)"},"400":{"description":"Événement invalide ou transition non autorisée"},"404":{"description":"Session introuvable (pour certains événements)"}},"tags":["Scribe"]}},"/api/scribe/machine/{sessionId}/state":{"get":{"operationId":"ScribeController_getMachineState","summary":"Récupérer l'état actuel de la ScribeMachine","description":"Retourne l'état complet (value, context, updatedAt)","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"État actuel de la machine"},"404":{"description":"Session introuvable"}},"tags":["Scribe"]}},"/api/scribe/machine/{sessionId}/reset":{"post":{"operationId":"ScribeController_resetMachine","summary":"Réinitialiser la ScribeMachine","description":"Remet la machine à l'état IDLE pour un nouveau cycle","parameters":[{"name":"sessionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Machine réinitialisée"},"404":{"description":"Session introuvable"}},"tags":["Scribe"]}},"/api/knowledge-graph/consultations/{consultationId}/nodes":{"get":{"operationId":"KnowledgeGraphController_getConsultationNodes","parameters":[{"name":"consultationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/knowledge-graph/consultations/{consultationId}/graph":{"get":{"operationId":"KnowledgeGraphController_getConsultationGraph","parameters":[{"name":"consultationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/knowledge-graph/patients/{patientId}/nodes":{"get":{"operationId":"KnowledgeGraphController_getPatientNodes","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/identity/patients":{"post":{"operationId":"IdentityController_createPatient","parameters":[],"responses":{"201":{"description":""}}}},"/api/identity/patients/by-ins/{insToken}":{"get":{"operationId":"IdentityController_findByINS","parameters":[{"name":"insToken","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/identity/patients/search":{"get":{"operationId":"IdentityController_searchPatients","parameters":[],"responses":{"200":{"description":""}}}},"/api/identity/patients/{id}":{"get":{"operationId":"IdentityController_getPatientById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/billing":{"get":{"operationId":"BillingController_ping","parameters":[],"responses":{"200":{"description":""}}}},"/api/feedback/events":{"post":{"operationId":"FeedbackController_createFeedback","parameters":[],"responses":{"201":{"description":""}}}},"/api/feedback/coding":{"post":{"operationId":"FeedbackController_recordCodingCorrection","parameters":[],"responses":{"201":{"description":""}}}},"/api/feedback/entities/{entityId}":{"get":{"operationId":"FeedbackController_getEntityFeedbacks","parameters":[{"name":"entityId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/feedback/stats":{"get":{"operationId":"FeedbackController_getFeedbackStats","parameters":[],"responses":{"200":{"description":""}}}},"/api/neuro-symbolic/reasoning":{"post":{"operationId":"NeuroSymbolicController_reasoning","parameters":[],"responses":{"201":{"description":""}}}},"/api/interop/fhir/patient/to":{"post":{"operationId":"InteropController_toFHIR","parameters":[],"responses":{"201":{"description":""}}}},"/api/interop/fhir/patient/from":{"post":{"operationId":"InteropController_fromFHIR","parameters":[],"responses":{"201":{"description":""}}}},"/api/interop/hl7/parse":{"post":{"operationId":"InteropController_parseHL7","parameters":[],"responses":{"201":{"description":""}}}},"/api/interop/hl7/generate":{"post":{"operationId":"InteropController_generateHL7","parameters":[],"responses":{"201":{"description":""}}}},"/api/pgvector/search":{"post":{"operationId":"PgVectorController_semanticSearch","parameters":[],"responses":{"201":{"description":""}}}},"/api/pgvector/embedding/generate":{"post":{"operationId":"PgVectorController_generateEmbedding","parameters":[],"responses":{"201":{"description":""}}}},"/api/pgvector/index/{nodeId}":{"post":{"operationId":"PgVectorController_indexNode","parameters":[{"name":"nodeId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":""}}}},"/api/dpi/patients/{patientId}":{"get":{"operationId":"DPIController_getPatientDPI","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/dpi/patients/{patientId}/search":{"get":{"operationId":"DPIController_searchDPI","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}},{"name":"q","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/dpi/documents":{"post":{"operationId":"DPIController_createMedicalDocument","parameters":[],"responses":{"201":{"description":""}}}},"/api/dpi/reports":{"post":{"operationId":"DPIController_createMedicalReport","parameters":[],"responses":{"201":{"description":""}}}},"/api/appointments":{"post":{"operationId":"AppointmentsController_createAppointment","parameters":[],"responses":{"201":{"description":""}}}},"/api/appointments/doctors/{doctorId}":{"get":{"operationId":"AppointmentsController_getDoctorAppointments","parameters":[{"name":"doctorId","required":true,"in":"path","schema":{"type":"string"}},{"name":"startDate","required":true,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/appointments/patients/{patientId}":{"get":{"operationId":"AppointmentsController_getPatientAppointments","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}},{"name":"upcomingOnly","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/appointments/{id}/cancel":{"put":{"operationId":"AppointmentsController_cancelAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/appointments/{id}/confirm":{"put":{"operationId":"AppointmentsController_confirmAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/appointments/{id}/complete":{"put":{"operationId":"AppointmentsController_completeAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/appointments/reminders/pending":{"get":{"operationId":"AppointmentsController_getPendingReminders","parameters":[{"name":"beforeDate","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/messaging/messages":{"post":{"operationId":"MessagingController_sendMessage","parameters":[],"responses":{"201":{"description":""}}},"get":{"operationId":"MessagingController_getUserMessages","parameters":[{"name":"threadId","required":true,"in":"query","schema":{"type":"string"}},{"name":"unreadOnly","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/messaging/threads":{"get":{"operationId":"MessagingController_getUserThreads","parameters":[],"responses":{"200":{"description":""}}},"post":{"operationId":"MessagingController_createGroupThread","parameters":[],"responses":{"201":{"description":""}}}},"/api/messaging/messages/{id}/read":{"put":{"operationId":"MessagingController_markAsRead","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/messaging/unread-count":{"get":{"operationId":"MessagingController_getUnreadCount","parameters":[],"responses":{"200":{"description":""}}}},"/api/staff/members":{"post":{"operationId":"StaffController_createStaffMember","parameters":[],"responses":{"201":{"description":""}}},"get":{"operationId":"StaffController_getStaffByRole","parameters":[{"name":"role","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/staff/shifts":{"post":{"operationId":"StaffController_createShift","parameters":[],"responses":{"201":{"description":""}}}},"/api/staff/leaves":{"post":{"operationId":"StaffController_requestLeave","parameters":[],"responses":{"201":{"description":""}}}},"/api/staff/leaves/{id}/{action}":{"put":{"operationId":"StaffController_processLeaveRequest","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"action","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/staff/members/{id}/schedule":{"get":{"operationId":"StaffController_getStaffSchedule","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"startDate","required":true,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/inventory/items":{"post":{"operationId":"InventoryController_createStockItem","parameters":[],"responses":{"201":{"description":""}}},"get":{"operationId":"InventoryController_getStockItemsByCategory","parameters":[{"name":"category","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/inventory/items/{id}":{"get":{"operationId":"InventoryController_getStockItem","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/inventory/movements":{"post":{"operationId":"InventoryController_recordStockMovement","parameters":[],"responses":{"201":{"description":""}}}},"/api/inventory/alerts":{"get":{"operationId":"InventoryController_getActiveAlerts","parameters":[{"name":"severity","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/inventory/alerts/{id}/acknowledge":{"put":{"operationId":"InventoryController_acknowledgeAlert","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/transcription/audio":{"post":{"operationId":"TranscriptionController_transcribeAudio","parameters":[],"responses":{"201":{"description":""}}}},"/api/transcription/stream":{"post":{"operationId":"TranscriptionController_transcribeStream","parameters":[],"responses":{"201":{"description":""}}}},"/api/lis/results":{"post":{"operationId":"LISController_receiveLaboratoryResult","parameters":[],"responses":{"201":{"description":""}}}},"/api/lis/results/batch":{"post":{"operationId":"LISController_receiveBatchResults","parameters":[],"responses":{"201":{"description":""}}}},"/api/lis/patients/{patientId}/results":{"get":{"operationId":"LISController_getPatientResults","parameters":[{"name":"patientId","required":true,"in":"path","schema":{"type":"string"}},{"name":"testDateFrom","required":true,"in":"query","schema":{"type":"string"}},{"name":"testDateTo","required":true,"in":"query","schema":{"type":"string"}},{"name":"status","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/api/esb/receive":{"post":{"operationId":"ESBController_receiveMessage","parameters":[{"name":"source","required":true,"in":"query","schema":{"type":"string"}},{"name":"content-type","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"201":{"description":""}}}},"/api/backup/create":{"post":{"operationId":"BackupController_createBackup","parameters":[],"responses":{"201":{"description":""}}}},"/api/pdf-extraction/extract":{"post":{"operationId":"PDFExtractionController_extractPDF","parameters":[],"responses":{"201":{"description":""}}}},"/api/pdf-extraction/extract-text":{"post":{"operationId":"PDFExtractionController_extractTextOnly","parameters":[],"responses":{"201":{"description":""}}}},"/api/document-analysis/ecosystem":{"post":{"operationId":"DocumentAnalysisController_analyzeEcosystem","parameters":[],"responses":{"201":{"description":""}}}}},"info":{"title":"Endocortex API","description":"Symbiote – Intelligence Engine (Scribe, Billing, Coding, Security). Livrable Golden Master pour Ben. Authentification : header X-INTERNAL-API-KEY (clé partagée avec le backend partenaire). L’API doit être démarrée pour que « Try it out » fonctionne (pas de ERR_CONNECTION_REFUSED).","version":"v115.0","contact":{}},"tags":[],"servers":[{"url":"/api","description":"Serveur courant (même origine que cette page)"}],"components":{"securitySchemes":{"X-INTERNAL-API-KEY":{"type":"apiKey","in":"header","name":"X-INTERNAL-API-KEY","description":"Clé API interne (backend-to-backend)"}},"schemas":{"SecurityContextDto":{"type":"object","properties":{"currentDrug":{"type":"string","example":"Amoxicilline","nullable":true,"description":"Médicament en cours de vérification"},"riskLevel":{"type":"string","example":"NONE","enum":["NONE","HIGH"],"description":"Niveau de risque (HIGH = contre-indication détectée)"},"blockReason":{"type":"string","example":null,"nullable":true,"description":"Raison du blocage si riskLevel HIGH"},"auditTrail":{"type":"string","example":null,"nullable":true,"description":"Justification enregistrée en cas de dérogation (REQUEST_OVERRIDE)"}},"required":["currentDrug","riskLevel","blockReason","auditTrail"]},"SecurityResponseDto":{"type":"object","properties":{"value":{"type":"string","example":"SAFE","enum":["IDLE","ANALYZING","SAFE","LOCKED","OVERRIDE_APPROVED"],"description":"État courant (LOCKED = contre-indication, OVERRIDE_APPROVED = dérogation validée)"},"context":{"description":"Contexte (currentDrug, riskLevel, blockReason)","allOf":[{"$ref":"#/components/schemas/SecurityContextDto"}]},"updatedAt":{"type":"string","example":"2026-02-05T12:00:00.000Z","description":"Date/heure de dernière mise à jour (ISO 8601)"}},"required":["value","context","updatedAt"]},"AnalyzeTextBodyDto":{"type":"object","properties":{"text":{"type":"string","example":"Le patient présente une fracture du tibia droit.","description":"Texte à analyser (ex. sortie Scribe) pour proposer des codes CIM-10"}},"required":["text"]},"CodingSuggestionItemDto":{"type":"object","properties":{"code":{"type":"string","example":"S82","description":"Code CIM-10"},"label":{"type":"string","example":"Fracture de la jambe","description":"Libellé du code"},"confidence":{"type":"number","example":0.95,"minimum":0,"maximum":1,"description":"Score de confiance (0.0–1.0)"}},"required":["code","label","confidence"]},"CodingContextDto":{"type":"object","properties":{"lastInput":{"type":"string","example":"","description":"Dernier texte soumis à l’analyse"},"suggestions":{"description":"Liste des codes CIM-10 détectés (affichés uniquement en état SUGGESTING)","type":"array","items":{"$ref":"#/components/schemas/CodingSuggestionItemDto"}}},"required":["lastInput","suggestions"]},"CodingResponseDto":{"type":"object","properties":{"value":{"type":"string","example":"SUGGESTING","enum":["IDLE","ANALYZING","SUGGESTING","SILENT"],"description":"État courant de la machine (Silence attentionnel : SILENT = confiance < seuil)"},"context":{"description":"Contexte (lastInput, suggestions)","allOf":[{"$ref":"#/components/schemas/CodingContextDto"}]},"updatedAt":{"type":"string","example":"2026-02-05T12:00:00.000Z","description":"Date/heure de dernière mise à jour (ISO 8601)"}},"required":["value","context","updatedAt"]},"DashboardTimelineItemDto":{"type":"object","properties":{"date":{"type":"string","example":"2024-01-15","description":"Date de l’événement"},"type":{"type":"string","example":"consultation","description":"Type (consultation, diagnostic, …)"},"summary":{"type":"string","example":"Consultation cardiologie – bilan hypertension","description":"Résumé"}},"required":["date","type","summary"]},"DashboardAlertDto":{"type":"object","properties":{"level":{"type":"string","example":"HIGH","enum":["HIGH","MEDIUM"],"description":"Niveau de gravité"},"message":{"type":"string","example":"Allergie à la Pénicilline – ne pas prescrire","description":"Message d’alerte"}},"required":["level","message"]},"DashboardOracleDataDto":{"type":"object","properties":{"patientId":{"type":"string","example":"patient-dashboard-test","description":"Identifiant patient"},"timeline":{"description":"Timeline des événements","type":"array","items":{"$ref":"#/components/schemas/DashboardTimelineItemDto"}},"alertes":{"description":"Alertes actives (allergies, interactions, …)","type":"array","items":{"$ref":"#/components/schemas/DashboardAlertDto"}}},"required":["patientId","timeline","alertes"]},"DashboardOracleStateDto":{"type":"object","properties":{"state":{"type":"string","example":"READY","enum":["IDLE","INITIALIZING","FETCHING_CONTEXT","ANALYZING","READY","ERROR"],"description":"État de la PatientContextMachine (Oracle)"},"data":{"nullable":true,"description":"Données patient (timeline + alertes) lorsque state === READY, sinon null","allOf":[{"$ref":"#/components/schemas/DashboardOracleDataDto"}]}},"required":["state","data"]},"DashboardSecurityStateDto":{"type":"object","properties":{"status":{"type":"string","example":"DEFCON_3","enum":["IDLE","DEFCON_3"],"description":"Vigilance : DEFCON_3 = allergie critique détectée"},"blocking_reasons":{"example":["Allergie à la Pénicilline – ne pas prescrire"],"description":"Raisons de blocage / vigilance (messages des alertes critiques)","type":"array","items":{"type":"string"}}},"required":["status","blocking_reasons"]},"DashboardCodingSuggestionItemDto":{"type":"object","properties":{"code":{"type":"string","example":"Z00.0","description":"Code CIM-10"},"label":{"type":"string","example":"Examen médical général","description":"Libellé du code"},"confidence":{"type":"number","example":0.85,"minimum":0,"maximum":1,"description":"Score de confiance (0.0–1.0). Au-dessus du seuil → état SUGGESTING."}},"required":["code","label","confidence"]},"DashboardCodingStateDto":{"type":"object","properties":{"status":{"type":"string","example":"SUGGESTING","enum":["IDLE","ANALYZING","SUGGESTING","SILENT"],"description":"IDLE=inactif, ANALYZING=analyse en cours, SUGGESTING=codes proposés, SILENT=confiance trop basse"},"suggestions":{"description":"Suggestions de codes CIM-10 (remplies en SUGGESTING, vides sinon)","type":"array","items":{"$ref":"#/components/schemas/DashboardCodingSuggestionItemDto"}}},"required":["status","suggestions"]},"PatientDashboardStateDto":{"type":"object","properties":{"oracle":{"description":"État de l’Oracle (contexte patient)","allOf":[{"$ref":"#/components/schemas/DashboardOracleStateDto"}]},"security":{"description":"État du SecurityGuard (vigilance / DEFCON_3)","allOf":[{"$ref":"#/components/schemas/DashboardSecurityStateDto"}]},"coding":{"description":"État du Coding Assistant (suggestions CIM-10, Silence attentionnel)","allOf":[{"$ref":"#/components/schemas/DashboardCodingStateDto"}]}},"required":["oracle","security","coding"]},"BillingCodeDto":{"type":"object","properties":{"code":{"type":"string"},"label":{"type":"string"},"confidence":{"type":"number","minimum":0,"maximum":1}},"required":["code","label","confidence"]},"PrescriptionItemDto":{"type":"object","properties":{"drug":{"type":"string"},"dosage":{"type":"string"},"duration":{"type":"string"}},"required":["drug","dosage","duration"]},"ValidateFinalSuccessDto":{"type":"object","properties":{"success":{"type":"boolean","example":true},"graphNodesCreated":{"type":"number","example":5,"description":"Nombre de relations Neo4j créées (REVEALED, CONCLUDED, etc.)"}},"required":["success","graphNodesCreated"]},"GuardianBlockErrorDto":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"INTERDICTION CRITIQUE : Patient allergique à Pénicilline.","description":"Message d’interdiction (allergie ou interaction détectée). À afficher tel quel dans l’UI."},"statusCode":{"type":"number","example":400},"timestamp":{"type":"string","example":"2025-01-28T18:00:00.000Z"},"path":{"type":"string","example":"/api/scribe/validate/draft-123"}},"required":["success","error","statusCode","timestamp","path"]},"IntelligenceTimelineItemDto":{"type":"object","properties":{"date":{"type":"string"},"type":{"type":"string"},"summary":{"type":"string"}},"required":["date","type","summary"]},"IntelligenceAlertDto":{"type":"object","properties":{"level":{"type":"string","enum":["HIGH","MEDIUM"]},"message":{"type":"string"}},"required":["level","message"]},"IntelligenceResponseDto":{"type":"object","properties":{"summary":{"type":"string"},"timeline":{"type":"array","items":{"$ref":"#/components/schemas/IntelligenceTimelineItemDto"}},"activeAlerts":{"type":"array","items":{"$ref":"#/components/schemas/IntelligenceAlertDto"}},"quickActions":{"type":"array","items":{"type":"string"}}},"required":["summary","timeline","activeAlerts","quickActions"]}}},"security":[{"X-INTERNAL-API-KEY":[]}]}